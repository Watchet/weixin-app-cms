"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_api=require("./../api/api.js"),_api2=_interopRequireDefault(_api),_tip=require("./../utils/tip.js"),_tip2=_interopRequireDefault(_tip),Tab=function(e){function t(){var e,r,n,a;_classCallCheck(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.components={},n.props={active:{twoWay:!0}},n.data={array:[],menu:[],linkUpload:"",pageSize:6,pageNo:1,loadFlag:!0},n.methods={changePage:function(){function e(e){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.active=t,this.pageNo=1,this.loadFlag=!0,e.next=5,_api2.default.getArticlesList({query:{columnId:t}});case 5:r=e.sent,1==r.data.success?(this.pageNo=2,this.array=r.data.obj.list.results):_tip2.default.error(r.data.msg),this.$apply();case 8:case"end":return e.stop()}},e,this)}));return e}(),toArticlesContent:function(e){wx.navigateTo({url:"article?articlesId="+e})},goToMenu:function(e){console.log("url==="+e),0!=e.length&&_wepy2.default.navigateTo({url:e})}},n.events={},a=r,_possibleConstructorReturn(n,a)}return _inherits(t,e),_createClass(t,[{key:"loadArticle",value:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.active,r=this.pageNo,this.loadFlag){e.next=6;break}console.log("无数据"),e.next=11;break;case 6:return e.next=8,_api2.default.getArticlesList({query:{columnId:t,pageNumber:r}});case 8:n=e.sent,1==n.data.success?(this.pageNo=this.pageNo+1,a=n.data.obj.list.results,a.length<=0&&(this.loadFlag=!1),this.array=this.array.concat(a)):_tip2.default.error(n.data.msg),this.$apply();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"onLoad",value:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_api2.default.getMenuList();case 2:return t=e.sent,r=_api2.default.apiAdUpload,this.linkUpload=r,this.menu=t.data,n=this.menu[0].id,this.active=n,e.next=10,_api2.default.getArticlesList({query:{columnId:n}});case 10:a=e.sent,1==a.data.success?(this.pageNo=this.pageNo+1,this.array=a.data.obj.list.results):_tip2.default.error(a.data.msg),this.$apply();case 13:case"end":return e.stop()}},e,this)}));return e}()}]),t}(_wepy2.default.component);exports.default=Tab;